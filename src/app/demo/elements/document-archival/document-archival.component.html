<div class="documents-container">
  <div class="header">
    <div>
      <h2>Documents</h2>
      <p>Keep track employee salary on daily basis.</p>
    </div>
    <button class="export-btn" (click)="openUploadModal()">
      <i class="fas fa-upload"></i> Upload File
    </button>
  </div>

  <div class="controls">
    <div class="left-controls">
      <div class="search-container">
        <i class="fas fa-search"></i>
        <input type="text" 
               placeholder="Search" 
               class="search-box" 
               [(ngModel)]="searchQuery"
               (input)="searchDocuments()" />
      </div>
      <button class="filter-btn">
        <i class="fas fa-filter"></i> Filters
      </button>
    </div>
    <div class="right-controls">
<select class="file-type" [(ngModel)]="selectedFileType" (change)="filterByType()">
  <option value="">File Type</option>
  <option value="pdf">PDF</option>
  <option value="docx">Word</option>
  <option value="xlsx">Excel</option>
</select>

      <button class="date-sort">
  <i class="fas fa-calendar-alt"></i> 21 June 2025
</button>

    </div>
  </div>

  <table class="document-table">
    <thead>
      <tr class="table-header">
        <th><input type="checkbox" /></th>
        <th>Name</th>
        <th>Created By</th>
        <th>Date Created</th>
        <th>Last Updated</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let doc of filteredDocuments">
        <td><input type="checkbox" /></td>
        <td>
          <div class="file-name">
            <i 
              [class]="getFileIconClass(doc.fileType)" 
              [style.color]="getFileIconColor(doc.fileType)"
            ></i>
            <div>
              <div [innerHTML]="highlightMatches(doc.name + '.' + doc.fileType)"></div>
              <small [innerHTML]="highlightMatches(doc.size)"></small>
            </div>
          </div>
        </td>
        <td [innerHTML]="highlightMatches(doc.createdBy)"></td>
        <td>{{doc.dateCreated}}</td>
        <td>
          {{doc.lastUpdated}}<br />
          <small [innerHTML]="highlightMatches(doc.updatedBy)"></small>
        </td>
        <td class="actions">
          <i class="fas fa-eye action-icon" title="View" (click)="viewDocument(doc.id)"></i>
          <i class="fas fa-pencil-alt action-icon" title="Edit" (click)="openEditModal(doc)"></i>
          <i class="fas fa-download action-icon" title="Download"></i>
        </td>
              <td>{{ formatDate(doc.dateCreated) }}</td>

      </tr>
    </tbody>
  </table>

  <!-- Edit Modal -->
  <div class="modal-overlay" *ngIf="showModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Edit Document</h3>
        <button class="close-btn" (click)="closeModal()">&times;</button>
      </div>
      <div class="modal-body" *ngIf="selectedDocument">
        <div class="form-group">
          <label>Name</label>
          <input type="text" [(ngModel)]="selectedDocument.name" class="form-control">
        </div>
        <div class="form-group">
          <label>File Type</label>
          <select [(ngModel)]="selectedDocument.fileType" class="form-control">
            <option value="pdf">PDF</option>
            <option value="docx">Word</option>
            <option value="xlsx">Excel</option>
          </select>
        </div>
        <div class="form-group">
          <label>Created By</label>
          <input type="text" [(ngModel)]="selectedDocument.createdBy" class="form-control">
        </div>
        <div class="form-group">
          
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-cancel" (click)="closeModal()">Cancel</button>
        <button class="btn btn-save" (click)="saveChanges()">Save Changes</button>
      </div>
    </div>
  </div>

  <!-- Upload File Modal -->
  <div class="modal-overlay" *ngIf="showUploadModal">
    <div class="modal-content upload-modal">
      <div class="modal-header">
        <h3>Upload File</h3>
        <button class="close-btn" (click)="closeUploadModal()">&times;</button>
      </div>
      <div class="modal-body">
        <div class="file-upload-card">
          <div class="file-meta">
            <div class="file-meta-label">File Name</div>              
            <div>
              <input type="text" id="fileDescription" 
                     [(ngModel)]="fileDescription" 
                     placeholder="Enter File Name">
            </div>
          </div>
          
          <div class="upload-area" (click)="fileInput.click()">
            <input #fileInput type="file" class="file-input" (change)="onFileSelected($event)">
            <div class="upload-icon">
              <i class="fas fa-cloud-upload-alt"></i>
            </div>
            <div class="upload-instructions">
              <button class="browse-btn" type="button">Choose file</button>
              <div class="drag-text">or drag and drop your file here</div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-upload" [disabled]="!selectedFile" (click)="uploadFile()">Upload</button>
        <button class="btn btn-cancel" (click)="closeUploadModal()">Cancel</button>
      </div>
    </div>
  </div>
</div>